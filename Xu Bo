//许博文件放这里
/////////////////////////////////////////点亮小灯并闪烁////////////////////////////////////////////                                                     
#include <hidef.h>      /* common defines and macros */
#include "derivative.h"      /* derivative-specific definitions */
void PLL_Init(void)            //锁相环初始化
void INIT_PORT(void)           //IO端口初始化

void PLL_Init(void)
{    
    CLKSEL=0X00;   //disengage PLL to system
    PLLCTL_PLLON=1;   //turn on PLL
    SYNR =0xc0 | 0x09;   //80M                     
    REFDV=0xc0 | 0x01;  //pllclock=2*osc*(1+SYNR)/(1+REFDV)=160MHz;BUS CLOCK=80M
    POSTDIV=0x00;       
    _asm(nop);          
    _asm(nop);
    _asm(nop);
    _asm(nop);
    while(!(CRGFLG_LOCK==1));   
    CLKSEL_PLLSEL =1;
    COPCTL = 0x00;       //COPCTL.2-0(cr2:cr0) =000禁止看门狗       
}//总线频率为80MHz

void INIT_PORT(void) 
{
    DDR1AD0     = 0x00;//AD口全部输入;
    DDRA        = 0x00;//
    DDRB        = 0xE8;
    DDRM        = 0xF5;//
    DDRT        = 0X15;//
    DDRP        = 0XFA;//
    DDRE        = DDRE|0XFC;
}
void delay(uint z)																	  
{
	uint x,y;
	for(x=z;x>0;x--)
		for(y=500;y>0;y--);
}

void main(void)
{
  /* put your own code here */ 

while(1)
{
 DDRB = 0xfe;
 delay(20000);
 DDRB = 0x00;
 delay(20000);
}
	EnableInterrupts;


  for(;;) {
    _FEED_COP(); /* feeds the dog */
  } /* loop forever */
  /* please make sure that you never leave main */
}
